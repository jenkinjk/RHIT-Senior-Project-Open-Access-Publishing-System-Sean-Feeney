{% extends "base.html" %}
{% block head %}
<!-- grab Jquery from a CDN, so we don't have to save and serve it -->
<script src="http://code.jquery.com/jquery-2.1.4.js"></script>
{% endblock %}
{% block title %}PDF Viewer{% endblock %}
{% block pageTitle %}PDF Viewer{% endblock %}
{% block content %}
<!-- <iframe src="/uploads/{{uniqueID}}" width="800" height="800"></iframe> -->

<div class="container">
	<div class="row">
		<div class="col-md-10 col-md-offset-1">
			{% if favorited %}
			<button id="fav" style="display: none" onclick="addFavorite();">Favorite!</button>
			<button id="unfav" onclick="rmFavorite();">Unfavorite!</button>
			{% else %}
			<button id="fav" onclick="addFavorite();">Favorite!</button>
			<button id="unfav" style="display: none" onclick="rmFavorite();">Unfavorite!</button>
			{% endif %}
			<br>
			{% for tagName in paper.tags %}
				{{ tagName }}
				{% if favoritedTags[loop.index - 1] %}
	                <button id="favTag{{tagName}}" style="display: none" onclick="addFavoriteTag('{{tagName}}');">Favorite Tag!</button>
	                <button id="defavTag{{tagName}}" onclick="rmFavoriteTag('{{tagName}}');">Unfavorite Tag!</button>
                {% else %}
	                <button id="favTag{{tagName}}" onclick="addFavoriteTag('{{tagName}}');">Favorite Tag!</button>
	                <button id="defavTag{{tagName}}" style="display: none" onclick="rmFavoriteTag('{{tagName}}');">Unfavorite Tag!</button>
                {% endif %}
                <br>
            {% endfor %}
            <br>
            {% for author in paper.authorIDs %}
            	{{ paper.authorNames[loop.index - 1]}}
            	{% if favoritedAuthors[loop.index - 1] %}
	                <button id="favAuthor{{author}}" style="display: none" onclick="addFavoriteAuthor('{{author}}');">Favorite Author!</button>
	                <button id="defavAuthor{{author}}" onclick="rmFavoriteAuthor('{{author}}');">Unfavorite Author!</button>
	            {% else %}
		            <button id="favAuthor{{author}}" onclick="addFavoriteAuthor('{{author}}');">Favorite Author!</button>
		            <button id="defavAuthor{{author}}" style="display: none" onclick="rmFavoriteAuthor('{{author}}');">Unfavorite Author!</button>
		        {% endif %}
                <br>
            {% endfor %}
            <button onclick="flipToFalse();" id="trueGuy" type="hidden">TrueGuy</button>
            <button onclick="flipToTrue();" id="falseGuy" style="display: none">FalseGuy</button>
			<object data="/uploads/{{uniqueID}}" type="application/pdf" height="850" width="100%">
				<embed src="/uploads/{{uniqueID}}" type="application/pdf"/>
			</object>
		</div>
	</div>
</div>
<hr class="col-md-12"> <!-- divider line -->
<hr class="col-md-12"> <!-- divider line -->

<script>
function addFavorite() {
	console.log("Adding favorite...");
	$.ajax({
    type : "POST",
    url : "/addFavorite",
    data: {paperID : {{uniqueID}}},
    
    success: function(result) {
        console.log(result);
        document.getElementById("fav").style.display="none";
		document.getElementById("unfav").style.display="inline-block";
    }
});
}

function rmFavorite() {
	console.log("Removing favorite...");
	$.ajax({
    type : "POST",
    url : "/removeFavorite",
    data: {paperID : {{uniqueID}}},
    
    success: function(result) {
        console.log(result);
        document.getElementById("unfav").style.display="none";
		document.getElementById("fav").style.display="inline-block";
    }
});
}

function addFavoriteTag(tagArg) {
	console.log("Adding favorite tag...");
	$.ajax({
    type : "POST",
    url : "/addFavoriteTag",
    data: {tag : tagArg},
    
    success: function(result) {
        console.log(result);
        document.getElementById("favTag".concat(tagArg)).style.display="none";
		document.getElementById("defavTag".concat(tagArg)).style.display="block";
    }
});
}

function rmFavoriteTag(tagArg) {
	console.log("Removing favorite tag...");
	$.ajax({
    type : "POST",
    url : "/removeFavoriteTag",
    data: {tag : tagArg},
    
    success: function(result) {
        console.log(result);
        document.getElementById("defavTag".concat(tagArg)).style.display="none";
		document.getElementById("favTag".concat(tagArg)).style.display="block";
    }
});
}

function addFavoriteAuthor(authorArg) {
	console.log("Adding favorite author...");
	$.ajax({
    type : "POST",
    url : "/addFavoriteAuthor",
    data: {author : authorArg},
    
    success: function(result) {
        console.log(result);
        document.getElementById("favAuthor".concat(authorArg)).style.display="none";
		document.getElementById("defavAuthor".concat(authorArg)).style.display="block";
    }
});
}

function rmFavoriteAuthor(authorArg) {
	console.log("Removing favorite author...");
	$.ajax({
    type : "POST",
    url : "/removeFavoriteAuthor",
    data: {author : authorArg},
    
    success: function(result) {
        console.log(result);
        document.getElementById("defavAuthor".concat(authorArg)).style.display="none";
		document.getElementById("favAuthor".concat(authorArg)).style.display="block";
    }
});
}

function flipToTrue() {
	document.getElementById("falseGuy").style.display="none";
	document.getElementById("trueGuy").style.display="block";
}

function flipToFalse() {
	document.getElementById("falseGuy").style.display="block";
	document.getElementById("trueGuy").style.display="none";
}

</script>

{% endblock %}


